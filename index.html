
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col h-screen">
  <div class="flex-1 overflow-y-auto p-4" id="chatBox"></div>
  <div class="p-4 bg-gray-800 flex">
    <input id="msgInput" class="flex-1 p-2 rounded bg-gray-700" placeholder="Type your message..." />
    <button onclick="sendMessage()" class="ml-2 px-4 py-2 bg-blue-600 rounded">Send</button>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-3RwPYCuMMjlXUf7C9V1CXqJ3P2SYB8I",
      authDomain: "chatbot-47c77.firebaseapp.com",
      databaseURL: "https://chatbot-47c77-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "chatbot-47c77",
      storageBucket: "chatbot-47c77.firebasestorage.app",
      messagingSenderId: "738876056600",
      appId: "1:738876056600:web:e7d5df2caa3357e1120f6d"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const messagesRef = db.ref("chat/messages");

    const chatBox = document.getElementById("chatBox");
    const msgInput = document.getElementById("msgInput");

    // Auto-scroll
    function scrollToBottom() {
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Listen for new messages
    messagesRef.on("child_added", (snapshot) => {
      const data = snapshot.val();
      const msgEl = document.createElement("div");
      msgEl.className = "my-2";
      msgEl.innerHTML = `<strong>${data.user}:</strong> ${data.text}`;
      chatBox.appendChild(msgEl);
      scrollToBottom();
    });

    const username = prompt("Enter your name:");

    function sendMessage() {
      const text = msgInput.value;
      if (text.trim() === "") return;
      messagesRef.push({ user: username || "Anon", text });
      msgInput.value = "";
    }
  </script>
</body>
</html>
